import { PrismaClient, InformationType, AuctionStatus } from '@prisma/client';
import bcrypt from 'bcryptjs';

const prisma = new PrismaClient();

async function seedRealOriginal() {
  console.log('üå± Restaurando datos ORIGINALES exactos...');

  // 1. Crear usuario administrador
  console.log('üîê Creando usuario administrador...');
  const hashedPassword = await bcrypt.hash('admin123456', 12);
  await prisma.user.upsert({
    where: { email: 'admin@espinarawson.com' },
    update: {},
    create: {
      email: 'admin@espinarawson.com',
      password: hashedPassword,
      name: 'Administrador',
      role: 'SUPER_ADMIN',
      isActive: true,
    },
  });
  console.log('‚úÖ Usuario administrador creado');

  // 2. Crear contenido ORIGINAL de p√°ginas
  console.log('üìù Creando contenido ORIGINAL de p√°ginas...');
  const pageContents = [
    // Hero Section
    {
      key: 'hero_title',
      value: 'Legado. Futuro.',
      section: 'hero',
      description: 'T√≠tulo principal del hero',
    },
    {
      key: 'hero_subtitle',
      value: 'Estrategia.',
      section: 'hero',
      description: 'Subt√≠tulo del hero',
    },
    {
      key: 'hero_description',
      value:
        'Desde 1968, redefiniendo la excelencia en el derecho comercial y las subastas de alto valor.',
      section: 'hero',
      description: 'Descripci√≥n del hero',
    },
    // About Section
    {
      key: 'about_title',
      value: 'El Estudio.',
      section: 'about',
      description: 'T√≠tulo de la secci√≥n sobre nosotros',
    },
    {
      key: 'about_description',
      value:
        'Somos arquitectos de soluciones. Nuestra firma se cimienta sobre d√©cadas de experiencia, pero nuestra mirada est√° puesta en el futuro. Integramos tecnolog√≠a y un enfoque multidisciplinario para ofrecer una claridad y eficacia sin precedentes.',
      section: 'about',
      description: 'Descripci√≥n principal del estudio',
    },
    {
      key: 'about_history_title',
      value: 'M√°s de 50 A√±os Definiendo el Futuro Legal.',
      section: 'about',
      description: 'T√≠tulo de la historia',
    },
    {
      key: 'about_history_description',
      value:
        'Nuestra trayectoria es la base de nuestra innovaci√≥n. Desde 1968, hemos sido pioneros en la resoluci√≥n de casos complejos y en la gesti√≥n de activos de alto valor, estableciendo un est√°ndar de excelencia y confianza en el √°mbito de las subastas judiciales y el derecho concursal.',
      section: 'about',
      description: 'Descripci√≥n de la historia',
    },
    // Expertise Section
    {
      key: 'expertise_title',
      value: 'Nuestra Expertise.',
      section: 'expertise',
      description: 'T√≠tulo de la secci√≥n de expertise',
    },
    {
      key: 'expertise_subtitle',
      value:
        'Dominio integral en las √°reas cr√≠ticas del derecho para el √©xito de su negocio.',
      section: 'expertise',
      description: 'Subt√≠tulo de expertise',
    },
    // Auctions Section
    {
      key: 'auctions_title',
      value: 'Oportunidades √önicas.',
      section: 'auctions',
      description: 'T√≠tulo de la secci√≥n de subastas',
    },
    {
      key: 'auctions_subtitle',
      value:
        'Acceda a subastas gestionadas con la m√°xima transparencia y profesionalismo.',
      section: 'auctions',
      description: 'Subt√≠tulo de subastas',
    },
  ];

  for (const content of pageContents) {
    await prisma.pageContent.upsert({
      where: { key: content.key },
      update: {
        value: content.value,
        description: content.description,
        section: content.section,
      },
      create: content,
    });
  }
  console.log('‚úÖ Contenido ORIGINAL de p√°ginas creado');

  // 3. Crear √°reas de pr√°ctica ORIGINALES
  console.log('‚öñÔ∏è Creando √°reas de pr√°ctica ORIGINALES...');
  const practiceAreas = [
    {
      title: 'Derecho Corporativo',
      description:
        'Asesoramiento integral en constituci√≥n de sociedades, fusiones, adquisiciones y reestructuraciones corporativas.',
      icon: 'briefcase',
      order: 0,
    },
    {
      title: 'Litigios y Arbitrajes',
      description:
        'Representaci√≥n en disputas comerciales complejas, con un enfoque en la resoluci√≥n eficiente de conflictos.',
      icon: 'scale',
      order: 1,
    },
    {
      title: 'Derecho Concursal',
      description:
        'Especialistas en procesos de insolvencia, reestructuraci√≥n de deudas y recuperaci√≥n de activos.',
      icon: 'shield',
      order: 2,
    },
    {
      title: 'Subastas y Ejecuciones',
      description:
        'Gesti√≥n profesional de subastas judiciales y extrajudiciales, maximizando el valor de los activos.',
      icon: 'gavel',
      order: 3,
    },
  ];

  // Limpiar √°reas de pr√°ctica existentes y crear las originales
  await prisma.practiceArea.deleteMany({});
  for (const area of practiceAreas) {
    await prisma.practiceArea.create({
      data: area,
    });
  }
  console.log('‚úÖ √Åreas de pr√°ctica ORIGINALES creadas');

  // 4. Crear configuraciones iniciales
  console.log('‚öôÔ∏è Creando configuraciones...');
  const settings = [
    {
      key: 'contact_email',
      value: 'info@espinarawson.com',
      description: 'Email de contacto principal',
    },
    {
      key: 'contact_phone',
      value: '(011) 1234-5678',
      description: 'Tel√©fono de contacto',
    },
    {
      key: 'contact_address',
      value: 'Av. Corrientes 1234, CABA',
      description: 'Direcci√≥n de la oficina',
    },
    {
      key: 'social_links',
      value: {
        linkedin: 'https://linkedin.com/company/espina-rawson',
        twitter: 'https://twitter.com/espinarawson',
      },
      description: 'Enlaces a redes sociales',
    },
  ];

  for (const setting of settings) {
    await prisma.settings.upsert({
      where: { key: setting.key },
      update: {
        value: setting.value,
        description: setting.description,
      },
      create: setting,
    });
  }
  console.log('‚úÖ Configuraciones creadas');

  // 5. Crear subastas ORIGINALES con fechas futuras
  console.log('üè† Creando subastas ORIGINALES...');
  const auctions = [
    {
      title: 'Inmueble Industrial en Parque Patricios',
      description:
        'Amplio galp√≥n industrial de 2.500m¬≤ con oficinas, ubicado en zona estrat√©gica con f√°cil acceso a autopistas. Ideal para operaciones log√≠sticas o manufactureras.',
      location: 'Parque Patricios, CABA',
      startingPrice: 850000,
      currentPrice: 850000,
      endDate: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000), // 10 d√≠as
      status: AuctionStatus.PUBLISHED,
      isFeatured: true,
      order: 0,
      mainImageUrl:
        'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&h=600&fit=crop',
      secondaryImage1:
        'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=600&fit=crop',
      pdfUrl: 'https://example.com/inmueble-parque-patricios.pdf',
    },
    {
      title: 'Flota de Veh√≠culos Comerciales',
      description:
        'Lote de 15 veh√≠culos utilitarios en excelente estado, incluye camionetas y furgones. Mantenimiento al d√≠a con documentaci√≥n completa.',
      location: 'Avellaneda, Buenos Aires',
      startingPrice: 320000,
      currentPrice: 320000,
      endDate: new Date(Date.now() + 25 * 24 * 60 * 60 * 1000), // 25 d√≠as
      status: AuctionStatus.PUBLISHED,
      isFeatured: true,
      order: 1,
      mainImageUrl:
        'https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=800&h=600&fit=crop',
      secondaryImage1:
        'https://images.unsplash.com/photo-1553440569-bcc63803a83d?w=800&h=600&fit=crop',
      pdfUrl: 'https://example.com/flota-vehiculos.pdf',
    },
    {
      title: 'Maquinaria Agr√≠cola de Alto Rendimiento',
      description:
        'Cosechadora John Deere modelo 2022, con menos de 500 horas de uso. Incluye cabezal maicero y plataforma sojera.',
      location: 'Pergamino, Buenos Aires',
      startingPrice: 180000,
      currentPrice: 180000,
      endDate: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000), // 5 d√≠as
      status: AuctionStatus.PUBLISHED,
      isFeatured: true,
      order: 2,
      mainImageUrl:
        'https://images.unsplash.com/photo-1625246333195-78d9c38ad449?w=800&h=600&fit=crop',
      secondaryImage1:
        'https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=800&h=600&fit=crop',
      pdfUrl: 'https://example.com/maquinaria-agricola.pdf',
    },
  ];

  // Limpiar subastas existentes y crear las originales
  await prisma.auction.deleteMany({});
  for (const auction of auctions) {
    await prisma.auction.create({
      data: auction,
    });
  }
  console.log('‚úÖ Subastas ORIGINALES creadas');

  // 6. Crear informaci√≥n (nueva secci√≥n)
  console.log('üìö Creando contenido informativo...');
  const informationData = [
    {
      title: 'Gu√≠a Completa de Subastas Judiciales',
      description:
        'Todo lo que necesitas saber sobre el proceso de subastas judiciales en Argentina, desde la presentaci√≥n hasta la adjudicaci√≥n.',
      type: InformationType.ARTICLE,
      url: 'https://example.com/guia-subastas-judiciales.pdf',
      thumbnail:
        'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop',
      author: 'Dr. Carlos Espina',
      publishDate: new Date('2024-01-15'),
      tags: ['Subastas', 'Judicial', 'Gu√≠a', 'Legal'],
      category: 'Subastas',
      order: 1,
    },
    {
      title: 'Video: C√≥mo Participar en una Subasta',
      description:
        'Tutorial paso a paso sobre c√≥mo participar correctamente en una subasta judicial.',
      type: InformationType.VIDEO,
      url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
      thumbnail:
        'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop',
      author: 'Equipo Legal Espina Rawson',
      publishDate: new Date('2024-01-10'),
      tags: ['Tutorial', 'Subastas', 'Video', 'Educativo'],
      category: 'Educativo',
      order: 2,
    },
    {
      title: 'Galer√≠a: Casos de √âxito en Subastas',
      description:
        'Im√°genes de propiedades subastadas exitosamente y testimonios de clientes satisfechos.',
      type: InformationType.IMAGE,
      url: 'https://example.com/galeria-casos-exito',
      thumbnail:
        'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop',
      author: 'Marketing Espina Rawson',
      publishDate: new Date('2024-01-05'),
      tags: ['Casos de √âxito', 'Galer√≠a', 'Testimonios', 'Propiedades'],
      category: 'Casos de √âxito',
      order: 3,
    },
  ];

  // Limpiar informaci√≥n existente y crear nueva
  await prisma.information.deleteMany({});
  for (const info of informationData) {
    await prisma.information.create({
      data: info,
    });
  }
  console.log('‚úÖ Contenido informativo creado');

  console.log('üéâ ¬°Datos ORIGINALES exactos restaurados exitosamente!');
}

seedRealOriginal()
  .catch((e) => {
    console.error('‚ùå Error restaurando datos ORIGINALES:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
